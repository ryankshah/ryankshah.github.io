<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Minecraft Modding Tutorials</title>
    <link rel="stylesheet"
          id="theme_link"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/lux/bootstrap.min.css"/>
    <!--    <link rel="stylesheet" href="css/navbar-fixed-right.min.css">-->
    <link rel="stylesheet" href="../css/navbar-fixed-left.min.css">
    <link rel="stylesheet" href="../css/docs.css">
    <link rel="stylesheet" href="../css/prism.css">
    <script
            src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="../js/docs.js"></script>
    <script src="../js/prism.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6391375557077628"
            crossorigin="anonymous"></script>
</head>

<body>
<nav class="navbar navbar-expand-md navbar-dark bg-primary fixed-top">
    <a class="navbar-brand" href="../index.html"><img src="../img/grass_block_icon.png" width="30" height="30" class="d-inline-block align-top" alt=""> Modding</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
            aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav">
            <div class="dropdown-divider"></div>
            <li class="nav-item">
                <a class="nav-link" href="../index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-expanded="true">
                    MultiLoader 1.21+
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="getting_started.html">Getting Started</a>
                    <a class="dropdown-item" href="regutils.html">Setting up RegistrationUtils</a>
                    <a class="dropdown-item" href="items.html">Creating Items</a>
                    <a class="dropdown-item" href="blocks.html">Creating Blocks</a>
                    <a class="dropdown-item" href="datagen_blocks_items.html">Data Generation - Blocks and Items</a>
                    <a class="dropdown-item active" href="datagen_block_loot.html">Data Generation - Block Loot</a>
                </div>
            </li>
            <div class="dropdown-divider"></div>
            <li class="nav-item">
                <a class="nav-link" href="../contact.html">Get in touch!</a>
            </li>
        </ul>
        <!--        <ul class="navbar-nav">-->
        <!--            <li class="nav-item">-->
        <!--                <a class="nav-link" data-class="fixed-left">-->
        <!--                    <i class="fa fa-arrow-left"></i>-->
        <!--                    Fixed Left-->
        <!--                </a>-->
        <!--            </li>-->
        <!--            <li class="nav-item">-->
        <!--                <a class="nav-link" data-class="fixed-top">-->
        <!--                    <i class="fa fa-arrow-up"></i>-->
        <!--                    Fixed Top-->
        <!--                    <small>(original)</small>-->
        <!--                </a>-->
        <!--            </li>-->
        <!--            <li class="nav-item">-->
        <!--                <a class="nav-link" data-class="fixed-right">-->
        <!--                    <i class="fa fa-arrow-right"></i>-->
        <!--                    Fixed Right-->
        <!--                </a>-->
        <!--            </li>-->
        <!--        </ul>-->
    </div>
</nav>

<div class="container" id="content">
    <div class="jumbotron">
        <h1 class="display-4">
            Minecraft Modding Tutorials
            <br>
        </h1>
        <p>
            <strong>
                Learn the basics, explore advanced techniques, and create mods that transform your Minecraft world.
                These step-by-step tutorials are designed to make getting into modding Minecraft a bit easier!
            </strong>
        </p>
        <p>
            <a class="github-button" href="https://github.com/ryankshah/ExampleMod"
               data-icon="octicon-star" data-show-count="true"
               aria-label="Star ryankshah/ExampleMod on GitHub">Star</a>
            <a class="github-button" href="https://github.com/ryankshah/ExampleMod/fork"
               data-icon="octicon-repo-forked" data-show-count="true"
               aria-label="Fork ryankshah/ExampleMod on GitHub">Fork</a>
            <a class="github-button" href="https://github.com/ryankshah"
               aria-label="Follow @ryankshah on GitHub">Follow @ryankshah</a>
        </p>
    </div>
    <div class="jumbotron" style="background: #FEFEFE;">
        <h1 class="display-4">
            <small>Data Generation &dash; Blocks and Items &dash; MultiLoader 1.21+</small>
        </h1>
        <br />
        <p>
            <strong>
                The next stage in our tutorial series is data generation &dash; specifically looking at generating our
                block and item models, and our blockstates files.
            </strong>
        </p>
        <br />
        <br />
        <h3 class="display-6">Common Generation</h3>
        <p>
            In this tutorial, we will be using the NeoForge side of the loader to do our generation, as they provide an
            easy approach for us to do so. However, doing this normally will mean that all our generated resources will
            be in a generated folder within NeoForge, and when we finish our mod later we will need to copy these over.
            So to make this easier and avoid the need to do that, we will be generating our resources directly into our
            common folder.
        </p>
        <p>
            Next, you should open up your NeoForge <kbd>build.gradle</kbd> file. In here we will do two things. First,
            replace the line at the bottom defining the main source sets with the following line:
        </p>
        <code class="language-gradle">
            sourceSets.main.resources { srcDir file('../common/src/generated/resources').getAbsolutePath() }
        </code>
        <br />
        <p>
            Second, you will need  to add the following line to your <kbd>data</kbd> run configuration beneath the
            <kbd>data()</kbd> method  call:
        </p>
        <pre>
            <code class="language-gradle">
data {
    data()
    programArguments.addAll '--mod', project.mod_id, '--all', '--output', file('../common/src/generated/resources').getAbsolutePath(), '--existing', file('../common/src/main/resources/').getAbsolutePath()
}
            </code>
        </pre>
        <br />
        <p>
            This will tell our data generator to output into the generated resources, but manage any duplicates/conflicts using our existing resources.
            The last bit for setting up the data generation before we code is to refresh gradle. You can do this by hitting
            the refresh button in the gradle menu.
        </p>
        <br />
        <h3 class="display-6">Block States and Models</h3>
        <p>
            In our NeoForge project, create a new package called <kbd>data</kbd> (or whatever you like!). In this package,
            we will first create a file called <kbd>ExampleBlockStateProvider</kbd> that extends <kbd>BlockStateProvider</kbd>.
            This class will be used to generate our Block (and BlockItem) models and BlockState resource files.
        </p>
        <p>
            Next you want to override the <kbd>registerStatesAndModels</kbd> function. Within this function, all we will
            need to do for now is call <kbd>simpleBlockWithItem</kbd>. There are two parameters here, the first being
            the block to be used for this specific data generation resource, and the second being the model file. If you
            recall from the <a href="blocks.html">Creating Blocks Tutorial</a>, our block parent was <kbd>cube_all</kbd>,
            so we will use this same model here by calling the <kbd>cubeAll</kbd> function and passing in our NEW_DIRT
            block as the parameter.
        </p>
        <p>
            Your BlockStateProvider should look as follows:
        </p>
        <pre>
            <code class="language-java">
public class ExampleBlockStateProvider extends BlockStateProvider
{
    public ExampleBlockStateProvider(PackOutput output, String modid, ExistingFileHelper existingFileHelper) {
        super(output, modid, existingFileHelper);
    }

    @Override
    protected void registerStatesAndModels() {
        simpleBlockWithItem(BlockRegistry.NEW_DIRT.get(), cubeAll(BlockRegistry.NEW_DIRT.get()));
    }

    private String name(Block block) {
        return this.key(block).getPath();
    }

    private ResourceLocation key(Block block) {
        return BuiltInRegistries.BLOCK.getKey(block);
    }
}
            </code>
        </pre>
        <p>
            You may notice there are a couple more functions I added in here. Feel free to keep this in your own file
            for now as well, as they will come in handy later down the line!
        </p>
        <h3 class="display-6">Item Models</h3>
        <p>
            The next step is to generate our item models, and we will create a new file in our <kbd>data</kbd> package
            called <kbd>ExampleItemModelProvider</kbd> which extends <kbd>ItemModelProvider</kbd>. In this class, we are
            going to override the <kbd>registerModels</kbd> function, and in this function we are going to call the
            <kbd>basicItem</kbd> function which takes in our new item created in the <kbd>ItemRegistry</kbd>.
        </p>
        <p>
            Your provider should look like this:
        </p>
        <pre>
            <code class="language-java">
public class ExampleItemModelProvider extends ItemModelProvider
{
    public ExampleItemModelProvider(PackOutput output, ExistingFileHelper existingFileHelper) {
        super(output, Constants.MOD_ID, existingFileHelper);
    }

    @Override
    protected void registerModels() {
        basicItem(ItemRegistry.IRON_STICK.get());
    }
}
            </code>
        </pre>
        <h3 class="display-6">Data Generation Event</h3>
        <p>
            The final step here is to register our providers to the <kbd>GatherDataEvent</kbd> in NeoForge. First, in your
            NeoForge mod class constructor, add the following line of code:
        </p>
        <code class="language-java">eventBus.addListener(ExampleMod::gatherData);</code>
        <br />
        <p>
            This will add a listener for a new function we will create called <kbd>gatherData</kbd> in the same file,
            which will call the event used for data generation and register our providers we just created.
        </p>
        <p>
            Next, we will create a public static void function called <kbd>gatherData</kbd> which takes in the parameter
            <kbd>GatherDataEvent</kbd>. Within this function, you will want to create a <kbd>try/catch</kbd> for a
            <kbd>RuntimeException</kbd> and use the <kbd>event.getGenerator().addProvider</kbd> to register our providers.
        </p>
        <p>
            For ease of use, you can see the ExampleMod <kbd>gatherData</kbd> function below:
        </p>
        <pre>
            <code class="language-java">
public static void gatherData(GatherDataEvent event) {
    try {
        DataGenerator generator = event.getGenerator();
        PackOutput output = generator.getPackOutput();
        ExistingFileHelper existingFileHelper = event.getExistingFileHelper();

        generator.addProvider(true,  new ExampleItemModelProvider(output, existingFileHelper));
        generator.addProvider(true, new ExampleBlockStateProvider(output, Constants.MOD_ID, existingFileHelper));
    } catch (RuntimeException e) {
        Constants.LOG.error("Failed to generate data", e);
    }
}
            </code>
        </pre>
        <br /><br />
        <p>
            Now before we can run the <kbd>NeoForge Data</kbd> run configuration, we need to delete our existing resources.
            But wait! Do not delete your textures, just delete the folders for <kbd>blockstates</kbd> and <kbd>models</kbd>
            in your <kbd>common</kbd> project.
        </p>
        <p>
            Next, go to your Run Configurations and choose the <kbd>NeoForge Data</kbd> configuration. This will run the
            NeoForge data generator and call our providers we made earlier.
        </p>
        <p>
            If successful, you should now see a <kbd>generated</kbd> or <kbd>generated (main)</kbd> folder in your
            common project which contains your block state, block model and item model we had before, but automatically
            generated for you. In future, this setup will make this much easier for when you have lots of blocks and
            items.
        </p>
        <img src="img/data_gen_success.png" style="width: 25%; margin: 0 auto"/><br />
        <br />
        <p>
            <strong>BUT WAIT!... My block doesn't drop anything?</strong>
        </p>
        <p>
            In the next tutorial, we will cover Block loot tables and how we can use our data generator for it.
        </p>
        <br />
        <p>
            You can find the source for this tutorial here:
        </p>
        <a href="https://github.com/ryankshah/ExampleMod/tree/4-Datagen-Items-Blocks" class="btn btn-primary" role="button">View Source</a>
        <br /><br /><br /><br />
        <div class="btn-group" role="group" aria-label="Navigation">
            <a class="btn btn-primary" role="button" href="blocks.html">&lt; &nbsp; Creating Blocks</a>
            <a class="btn btn-success" role="button" href="#">Data Generation &dash; Block Loot (COMING SOON) &nbsp; &gt;</a>
        </div>
        <!-- Bottom of Modding Tutorial Page -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6391375557077628"
             data-ad-slot="8332310498"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <footer class="mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">Maintained by <a href="https://github.com/ryankshah">ryankshah</a>.</span>
        </div>
    </footer>
</div>
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="ryankshah" data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee!" data-color="#FF813F" data-position="Right" data-x_margin="80" data-y_margin="80"></script>
</body>
</html>
